@mixin wpcm-clear-table {
	&::before,
	&::after {
		content: " ";
		display: table;
	}

	&::after {
		clear: both;
	}
}

@mixin wpcm-font($size: 1.6em, $weight: normal) {
	font-size: $size;
	font-weight: $weight;
}

////
/// Block grid generator.
///
/// @param {Number} $min        Minimum number of blocks.
/// @param {Number} $max        Maximum number of blocks.
/// @param {String} $breakpoint Accepts `medium` or `large`.
////
@mixin wpcm-block-grid($min: 2, $max: 6, $breakpoint: medium) {
	@for $i from $min through $max {
		.#{$breakpoint}-block-grid {
			@include breakpoint( $breakpoint ) {
				&-#{$i} > li {
					width: calc(100% / $i);
					list-style: none;

					&:nth-of-type(1n) {
						clear: none;
					}

					&:nth-of-type(#{$i}n + 1) {
						clear: both;
					}
				}
			}
		}
	}
}

$half-em: 0.5em;
$wpcm-font-size: 0.913em;

.wpclubmanager {
	.clearfix {
		@include wpcm-clear-table;
	}

	.wpcm {
		/*
		*******************************************************
		****** GLOBALLY SHARED STYLES
		*******************************************************
		*/
		&-row,
		&-staff-bio,
		&-staff-meta table,
		&-profile-meta table,
		&-birthdays-widget li,
		&-birthdays-widget li .birthday-post,
		&-birthdays-widget li .birthday-meta h4,
		&-matches-widget .clubs,
		&-matches-widget .cricket-score,
		&-matches-widget .fixture-meta,
		&-matches-widget .wpcm-date,
		&-match-details table:not(.dataTable),
		&-fixtures-shortcode table:not(.dataTable),
		&-players-shortcode table:not(.dataTable),
		&-standings-shortcode table:not(.dataTable) {
			width: 100%;
		}

		&-profile-image,
		&-sponsor-image,
		&-staff-image,
		&-match-meta-left,
		&-match-home-club,
		&-match-home-club-badge,
		&-birthdays-widget p.birthdate,
		&-birthdays-widget li,
		&-birthdays-widget li .birthday-post .birthday-image,
		&-single-sponsors .wpcm-sponsor-details,
		&-matches-widget .clubs,
		&-matches-widget .cricket-score,
		&-matches-widget .fixture-meta,
		&-matches-widget .wpcm-date,
		&-matches-widget .clubs .home-clubs,
		&-matches-widget .clubs .home-logo,
		&-matches-widget .clubs .away-clubs,
		&-matches-widget .clubs .away-logo,
		&-matches-widget ul li {
			float: left;
		}

		&-match-details,
		&-fixtures-shortcode,
		&-players-shortcode,
		&-standings-shortcode {
			table:not(.dataTable) {
				&,
				th,
				td {
					text-align: center;
				}

				thead,
				tbody {
					.club,
					.name,
					.position {
						text-align: left;
					}
				}
			}
		}

		&-club-map,
		&-club-details table:not(.dataTable),
		&-match-details h3,
		&-profile-stats h4,
		&-profile-stats-block,
		&-birthdays-widget li,
		&-matches-widget ul li {
			margin-bottom: 1.5em;
		}

		&-archive-sponsors .wpcm-entry-title,
		&-single-sponsors .wpcm-entry-title,
		&-club-details h2,
		&-sponsor-details h2 {
			margin: 0 0 1em;
			font-size: 1.6em;
			font-weight: normal;
		}

		&_map_canvas img {
			max-width: none !important;
		}

		// .wpcm-row
		&-row {
			margin: 0 auto;

			@include wpcm-clear-table;

			& & {
				width: auto;
				max-width: none;

				margin-top: 0;
				margin-bottom: 0;

				@include wpcm-clear-table;
			}
		}

		// .wpcm-fixtures-shortcode tbody tr:hover
		&-fixtures-shortcode tbody tr:hover {
			cursor: pointer;
		}

		// .wpcm-view-link
		&-view-link,
		// .wpcm-entry-content
		&-entry-content {
			display: block;
		}

		// .wpcm-view-link
		&-view-link {
			margin: 1.5em 0 0;
			float: right;
		}

		// .wpcm-entry-content
		&-entry-content,
		&-staff-bio,
		&-staff-shortcode {
			clear: both;
		}

		/*
		*******************************************************
		****** Shortcodes
		*******************************************************
		*/

		/* Staff */
		&-staff {
			&-bio,
			&-image,
			&-info {
				margin-bottom: 2em;
			}

			&-image {
				width: 40%;

				img {
					max-width: 100%;
				}
			}

			&-info {
				float: right;
				width: 50%;

				h1 {
					margin: 0 0 1.4em;
					@include wpcm-font;
				}
			}

			&-meta table th {
				font-weight: bold;
			}

			&-bio h3 {
				margin-bottom: 1em;
			}
		}

		/* Players */
		&-players-shortcode table:not(.dataTable) th.number {
			width: auto;
		}
		&-sub-appearances {
			font-size: 85%;
		}

		/* Standings */
		&-standings-shortcode tr.highlighted {
			background: rgba(0, 0, 0, 0.1);
		}

		/* Matches */
		&-fixtures-shortcode {
			td {
				span {
					&.win,
					&.draw,
					&.loss,
					&.postponed {
						display: block;
						width: 1rem;
						height: 1rem;
						border-radius: 10px;
						color: $color-white;
						float: right;
					}

					&.win {
						background: #269e0b;
					}

					&.draw {
						background: #808080;
					}

					&.loss {
						background: #9e0b2a;
					}

					&.postponed {
						background: #363636;
					}
				}
			}
		}

		// .wpcm-match
		&-match {
			// .wpcm-matches
			&es {
				/* Fixtures & results widgets */
				&-widget {
					ul {
						margin: 0;
						padding: 0;

						li {
							list-style: none !important;
							clear: both;
						}
					}

					.fixture-meta {
						margin-bottom: 1em;
						font-size: $wpcm-font-size;

						.competition,
						.team {
							padding: $half-em;
							text-transform: uppercase;
						}

						.team {
							float: right;
						}
					}

					.clubs {
						a {
							display: block;
						}

						.home,
						.away {
							&-clubs {
								display: block;
								margin: 0;
								padding: 0 2%;
								width: 96%;
								line-height: 36px;
								font-size: 1.15em;
							}

							&-logo {
								margin-right: 1em;
								width: 30px;
								height: 30px;
							}
						}

						.score {
							float: right;
							font-size: 1.4em;
							font-weight: bold;
						}
					}

					.cricket-score {
						font-weight: bold;
					}

					.wpcm-date {
						margin-top: 1em;
					}

					.kickoff {
						padding: $half-em;
					}
				}
			}

			/*
			*******************************************************
			****** Single Match
			*******************************************************
			*/

			&-comp,
			&-date {
				font-size: $wpcm-font-size;
				text-transform: uppercase;
			}

			&-info,
			&-fixture,
			&-home-club,
			&-away-club,
			&-score {
				text-align: center;
			}

			&-meta,
			&-status {
				padding: $half-em 0;
			}

			&-team,
			&-referee,
			&-attendance {
				font-size: $wpcm-font-size;
			}

			&-team,
			&-referee {
				padding-right: $half-em;
				text-align: right;
			}

			&-referee,
			&-attendance,
			&-home-club,
			&-away-club {
				padding-top: $half-em;
			}

			&-attendance,
			&-venue {
				padding-left: $half-em;
				text-align: left;
			}

			&-home,
			&-away {
				&-club {
					width: 37%;
					@include wpcm-font(1.4em, 600);
				}
			}

			&-info {
				padding: $half-em 0;
			}

			&-date {
				padding-top: 0.4em;
			}

			&-comp {
				padding-top: 0.8em;
			}

			&-fixture {
				padding: 1.5em 0 2em;
			}

			&-home-club-badge {
				padding-left: $half-em;
			}

			&-away-club {
				&,
				&-badge {
					float: right;
				}

				&-badge {
					padding-right: $half-em;
				}
			}

			&-score {
				display: inline-block;
				width: 24%;
				font-size: 2.4em;

				&,
				&-delimeter {
					font-weight: 600;
				}

				&-delimiter {
					line-height: 1em;
					font-size: 1em;
				}
			}

			&-overtime {
				margin-right: 1em;
			}

			&-meta {
				&-left,
				&-right {
					width: 50%;
				}

				&-right {
					float: right;
				}
			}

			&-report {
				padding: 0 0 3em;
			}

			&-details {
				padding: 2em 0;

				table:not(.dataTable) {
					th.name {
						width: 50%;

						.sub {
							padding-left: 1em;

							font: {
								size: $wpcm-font-size;
								style: italic;
								weight: normal;
							}
						}

						span.mvp {
							margin-left: 1em;
							color: #e5c100;
						}
					}

					td {
						&.goals,
						&.assists,
						&.rating {
							width: 9%;
						}

						&.notes {
							width: auto;

							.yellowcard,
							.redcard {
								display: inline-block;
								margin-left: 8px;
								height: 18px;
								width: 12px;
								background: url('/wp-content/plugins/wp-club-manager/assets/images/notes@2x.png') no-repeat;
								overflow: hidden;
								text-indent: -100px;
							}

							.yellowcard {
								background-position: 0 0;
							}

							.redcard {
								background-position: -12px 0;
							}
						}
					}
				}
			}

			&-stats {
				&-start,
				&-subs {
					img.wp-post-image {
						vertical-align: middle;
					}
				}

				&-subs {
					padding-top: 1.4em;
				}
			}

			&-venue {
				font-size: $wpcm-font-size;

				&-info .wpcm_map_canvas {
					max-width: 100%;
				}

				&-address {
					margin-top: 1em;
					padding: 1em $half-em;
					clear: both;
				}
			}

			&-map-canvas img {
				max-width: none;
			}
		}

		/* Sponsors */
		&-sponsor-widget ul {
			list-style: none !important;
		}

		/*
		*******************************************************
		****** Widgets
		*******************************************************
		*/

		&-countdown {
			display: block;
			margin: 10px 0;
			width: 100%;
			text-align: center;
		}

		&-ticker-countdown {
			vertical-align: middle;

			div {
				display: inline-block;
				margin-left: 4px;
				text-align: center;
				color: #444;
				font-size: 0.9em;

				&:first-of-type {
					margin-left: 0;
				}

				span {
					display: block;
					width: 2em;
					height: 2em;
					line-height: 2em;
					background: #eee;

					font: {
						size: 1.5em;
						weight: 600;
					}
				}
			}
		}

		&-birthdays-widget {
			li {
				h3.happy-birthday {
					margin: 0;
					padding: 0;
				}

				.birthday {
					&-post,
					&-meta {
						overflow: hidden;
						_overflow: visible;
						zoom: 1;
					}

					&-meta h4 {
						margin: 0;
						padding: 0;

						span {
							float: right;
						}
					}

					&-post .birthday-image {
						margin: 3px 10px 0 0;

						img {
							display: block;
						}
					}
				}
			}

			p.birthdate {
				margin: 0;
				padding: 0;
				font-size: $wpcm-font-size;
			}
		}

		/*
		*******************************************************
		****** Single Players
		*******************************************************
		*/

		&-profile {
			&-image,
			&-meta,
			&-stats,
			&-bio {
				margin-bottom: 2em;
			}

			&-image {
				width: 33.333%;

				img {
					max-width: 100%;
				}
			}

			&-meta {
				float: right;
				width: 58.333%;

				h1 {
					margin: 0 0 1.4em;
					@include wpcm-font;
				}

				table th {
					font-weight: bold;
				}
			}

			&-stats {
				.stats-tabs {
					&,
					&-multi {
						margin: 0;
						padding-left: 6px;
						border-bottom: 1px solid $color-border-input;
					}

					li,
					&-multi li {
						display: inline-block;
						position: relative;
						margin-bottom: -1px;
						border: 1px solid $color-border-input;
						background: $color-background-button;
						font-weight: 700;
						font-size: 0.9375em;

						a {
							display: inline-block;
							padding: 8px 12px;
							color: $color-text-input;
							text-decoration: none;
						}

						&.tabs {
							&,
							&-multi {
								border-bottom: 1px solid $color-white;
								background: $color-white;
							}
						}
					}
				}

				.tabs-panel {
					&,
					&-multi {
						margin-top: 1.4em;
						height: auto;
						overflow: auto;

						table td {
							text-align: center;
						}
					}
				}
			}
		}

		/*
		*******************************************************
		****** Sponsors Archive
		*******************************************************
		*/

		&-archive-sponsors .wpcm-sponsor-details,
		&-sponsor-thumbnail {
			float: right;
		}

		&-single-sponsors .wpcm-sponsor-details,
		&-sponsor-thumbnail {
			margin-bottom: 2em;
		}

		&-archive-sponsors .wpcm-sponsor-details {
			width: 55%;
		}

		&-single-sponsors .wpcm-sponsor-details {
			width: 65%;
		}

		&-sponsor {
			&-post {
				padding-bottom: 2.5em;
			}

			&-image {
				width: 40%;
			}

			&-thumbnail {
				width: 25%;
			}

			&-meta {
				margin-bottom: 1em;
			}

			&-details a.more-link {
				display: block;
			}
		}

		/*
		*******************************************************
		****** Single Club
		*******************************************************
		*/

		&-club-details {
			h2 {
				img {
					margin-right: 0.9375rem;
					vertical-align: middle;
				}
			}

			table:not(.dataTable) th {
				min-width: 100px;
				font-weight: 600;
			}
		}

		&-h2h-list,
		&-h2h-list li {
			list-style: none;
		}

		&-h2h-list {
			display: table;
			margin: 10px auto;
			border-collapse: separate;
			border-spacing: 10px;

			li {
				display: table-cell;
				padding: 20px;
				background: #f9f9f9;
				text-align: center;

				span {
					&.wpcm-h2h-list {
						&-count {
							font-size: 2em;
							font-weight: 600;
						}

						&-desc {
							display: block;
							margin-top: 5px;
							font-size: 0.75em;
							text-transform: uppercase;
						}
					}
				}

				&.p,
				&.w,
				&.d,
				&.l {
				}
			}
		}

		/* High Res images */
		@media only screen and (-webkit-min-device-pixel-ratio: 2),
			only screen and (min--moz-device-pixel-ratio: 2),
			only screen and (-o-min-device-pixel-ratio: 2 / 1),
			only screen and (min-device-pixel-ratio: 2),
			only screen and (min-resolution: 192dpi),
			only screen and (min-resolution: 2dppx) {
			&-match-details {
				table:not(.dataTable) {
					td.notes {
						.yellowcard,
						.redcard {
							display: inline-block;
							width: rem-calc(12px);
							height: rem-calc(18px);
							margin-left: 0.5rem;
							overflow: hidden;
							background: url("/wp-content/plugins/wp-club-manager/assets/images/notes@2x.png") no-repeat;
							background-size: 48px 18px;
							text-indent: -100px;
						}

						.yellowcard {
							background-position: 0 0;
						}

						.redcard {
							background-position: -24px 0;
						}
					}

					th.name span.mvp {
						margin-left: 1rem;
						color: #e5c100;
					}
				}
			}
		}

		&-players,
		&-staff {
			&-gallery-li h4 a {
				display: block;
			}
		}
	}

	table {
		margin-bottom: 1.25rem;
		border: solid 1px #dddddd;

		thead,
		tfoot {
			tr {
				th,
				td {
					padding: 0.5rem 0.625rem;
					font-weight: bold;
					text-align: left;
				}
			}
		}

		tr {
			th,
			td {
				padding: 0.5625rem 0.625rem;
			}
		}

		thead,
		tbody,
		tfoot {
			tr {
				.stat {
					span {
						line-height: 1;
					}
				}

				th,
				td {
					display: table-cell;
					line-height: 1.125rem;
				}
			}
		}
	}

	/*
	*******************************************************
	****** Widgets
	*******************************************************
	*/
	.widget {
		&-players,
		&-standings {
			h3.wpcm-sc-title {
				display: none;
			}
		}

		&-area & p.birthdate {
			float: left;
			font-size: $wpcm-font-size;
			margin: 0;
			padding: 0;
		}
	}

	[class*="block-grid-"] {
		padding: 0;
		margin: 0 -0.625rem;

		&,
		> li,
		img {
			display: block;
		}

		> li {
			box-sizing: border-box;
			height: auto;
			float: left;
			padding: 0 0.625rem 1.25rem;
			margin-left: 0 !important;

			img {
				max-width: 100%;
			}

			&:before,
			&:after {
				box-sizing: border-box;
			}
		}

		&:before {
			content: " ";
			display: table;
		}

		&:after {
			content: " ";
			display: table;
			clear: both;
		}
	}

	.small-block-grid-2 > li {
		width: 50%;
		list-style: none;

		&:nth-of-type(1n) {
			clear: none;
		}

		&:nth-of-type(2n + 1) {
			clear: both;
		}
	}

	// Block grid inspired by Foundation.
	@include wpcm-block-grid($breakpoint: 40.063);

	.leaflet-marker-icon {
		box-shadow: none !important;
	}
}
